// Load shared modals into page
const modalsContainer = document.getElementById('modals-container');
modalsContainer.innerHTML = `
  <div id="loginModal" class="modal fixed inset-0 z-30 justify-center items-center">
    <div class="bg-gray-900 rounded-xl p-6 w-80 shadow-2xl text-center">
      <h3 class="text-xl font-bold text-indigo-400 mb-4">Login</h3>
      <input id="usernameInput" type="text" placeholder="Username" class="w-full mb-3 px-3 py-2 rounded-md bg-gray-800 text-white focus:outline-none" />
      <input id="passwordInput" type="password" placeholder="Password" class="w-full mb-3 px-3 py-2 rounded-md bg-gray-800 text-white focus:outline-none" />
      <button id="loginSubmit" class="w-full py-2 bg-gradient-to-r from-indigo-500 to-blue-500 rounded-md text-white font-semibold hover:opacity-90 mb-2">Masuk</button>
      <div class="flex justify-between text-sm mt-2">
        <button id="forgotBtn" class="text-blue-400 hover:underline">Forgot Password</button>
        <button id="registerBtn" class="text-green-400 hover:underline">Register</button>
      </div>
      <button id="closeModal" class="mt-3 text-gray-400 hover:text-white text-sm">Tutup</button>
    </div>
  </div>

  <div id="resetModal" class="modal fixed inset-0 z-30 justify-center items-center">
    <div class="bg-gray-900 rounded-xl p-6 w-80 shadow-2xl text-center">
      <h3 class="text-xl font-bold text-indigo-400 mb-4">Reset Password</h3>
      <input id="resetEmail" type="email" placeholder="Masukkan email" class="w-full mb-3 px-3 py-2 rounded-md bg-gray-800 text-white focus:outline-none" />
      <button id="resetSubmit" class="w-full py-2 bg-gradient-to-r from-indigo-500 to-blue-500 rounded-md text-white font-semibold hover:opacity-90">Reset Password</button>
      <button id="closeReset" class="mt-3 text-gray-400 hover:text-white text-sm">Tutup</button>
    </div>
  </div>
`;

// Modal Logic
const loginModal=document.getElementById('loginModal');
const resetModal=document.getElementById('resetModal');
const loginBtn=document.getElementById('loginBtn');
const closeModal=document.getElementById('closeModal');
const forgotBtn=document.getElementById('forgotBtn');
const closeReset=document.getElementById('closeReset');
const registerBtn=document.getElementById('registerBtn');

loginBtn.addEventListener('click',()=>{loginModal.classList.add('show');});
closeModal.addEventListener('click',()=>{loginModal.classList.remove('show');});
window.addEventListener('click',e=>{if(e.target===loginModal)loginModal.classList.remove('show');});

forgotBtn.addEventListener('click',()=>{loginModal.classList.remove('show'); resetModal.classList.add('show');});
closeReset.addEventListener('click',()=>{resetModal.classList.remove('show');});
window.addEventListener('click',e=>{if(e.target===resetModal)resetModal.classList.remove('show');});

registerBtn.addEventListener('click',()=>{alert('Fitur Register belum diimplementasikan');});

// Demo login validasi sederhana
const loginSubmit = document.getElementById('loginSubmit');
loginSubmit.addEventListener('click',()=>{
  const u=document.getElementById('usernameInput').value;
  const p=document.getElementById('passwordInput').value;
  if(u==='fengbayu@gmail.com' && p==='kakanda'){
    alert('Login berhasil!');
    loginModal.classList.remove('show');
  } else{
    alert('Username atau password salah');
  }
});
